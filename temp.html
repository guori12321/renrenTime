<html>
    <head>
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript">
            var now = Date()
            var last
            var count = 0
            var flag = true

            function start()
            {
                flag = true
                document.title = "focused"
                last = new Date()
                document.stpw.time.value = "asdf"
              //  now = Date()    
              //  count += now.getTime() - last.getTime()
              //  document.stpw.time.value = count;
              //  document.stpw.time.value = "asdf";
            }

            function stop()
            {
                flag = false
                document.title = 'not focused';
                document.stpw.time.value = "zzz"
            }

            function go()
            {
                window.addEventListener('focus', start);
                window.addEventListener('blur', stop)
                start()
                display()
            }
                //  $(window).focus(function(e) {
                //       alert(document.URL.indexOf("file")>=0)
                //   }
                // $(window).focus(function(e) {
                //     //$(document).wirte(a)
                //     alert("you come")
                //  // Do Blur Actions Here
                //  }); 
                // $(window).blur(function(e) {
                //     alert("You Leave")
                //     });

            function display() 
            {
                setTimeout("display();", 50)
                if (flag)  
                {
                    now = new Date()
                    //ms = now.getTime() - last.getTime();
                    //ms = now - last
                    count += now.getTime() - last.getTime()
                    document.stpw.time.value = count
                    //document.stpw.time.value = 555;
                }
            }
            
            function dd()
            {
                alert("aa")
                //document.stpw.time.value = "aaaaa"
            }

            $(document).ready(go);
    </script>
</head>

<body>
    <FORM NAME="stpw">
        开始计时：
        <INPUT TYPE="text" Name="time">
        <INPUT TYPE="BUTTON" Name="ssbutton" VALUE="(未完成)开始/停止" id="a" onClick="dd()">
        <INPUT TYPE="BUTTON" NAME="reset" VALUE="(未完成)重置" onClick="dd()">
    </FORM>

</body>

</html>
